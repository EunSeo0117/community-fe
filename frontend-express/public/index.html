<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Satellite</title>
  <link rel="stylesheet" href="./css/landing.css" />
</head>
<body>
  <div class="starfield">
    <div class="solar-system">
      <div class="sun"></div>
      <div class="orbit orbit--pluto">
        <div class="planet"><span class="planet-label">Pluto</span></div>
      </div>
      <div class="orbit orbit--neptune">
        <div class="planet"><span class="planet-label">Neptune</span></div>
      </div>
      <div class="orbit orbit--uranus">
        <div class="planet"><span class="planet-label">Uranus</span></div>
      </div>
      <div class="orbit orbit--saturn">
        <div class="planet"><span class="planet-label">Saturn</span></div>
      </div>
      <div class="orbit orbit--jupiter">
        <div class="planet"><span class="planet-label">Jupiter</span></div>
      </div>
      <div class="orbit orbit--mars">
        <div class="planet"><span class="planet-label">Mars</span></div>
      </div>
      <div class="orbit orbit--earth">
        <div class="planet"><span class="planet-label">Earth</span></div>
      </div>
      <div class="orbit orbit--venus">
        <div class="planet"><span class="planet-label">Venus</span></div>
      </div>
      <div class="orbit orbit--mercury">
        <div class="planet"><span class="planet-label">Mercury</span></div>
      </div>
    </div>

    <div class="info-panel">
      <p class="info-label">자유로운 생각의 궤도</p>
      <h1 class="info-title">Satellite</h1>
      <p class="info-desc">
        행성을 클릭하면 게시판으로 이동해요.<br />
        마음껏 떠올리고, 흔적을 남겨보세요.
      </p>
      <button type="button" class="enter-btn">입장하기</button>
    </div>
  </div>

  <script src="./js/auth.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const API_BASE =
        window.API_BASE_URL ||
        (window.auth && window.auth.API_BASE_URL) ||
        `${window.location.origin}/api`;

      const enter = async () => {
        try {
          const res = await fetch(`${API_BASE}/users`, {
            method: "GET",
            credentials: "include",
          });

          if (!res.ok) {
            window.location.href = "./login";
            return;
          }

          window.location.href = "/postList";
        } catch (_) {
          window.location.href = "./login";
        }
      };

      document.querySelectorAll(".planet").forEach((planet) => {
        const orbit = planet.closest(".orbit");

        planet.addEventListener("mouseenter", () => {
          if (orbit) {
            orbit.classList.add("orbit--paused");
          }
        });

        planet.addEventListener("mouseleave", () => {
          if (orbit) {
            orbit.classList.remove("orbit--paused");
          }
        });

        planet.addEventListener("click", (e) => {
          e.preventDefault();
          enter();
        });
      });

      const enterBtn = document.querySelector(".enter-btn");
      if (enterBtn) {
        enterBtn.addEventListener("click", enter);
      }
    });
  </script>
</body>
</html>
